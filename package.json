{
  "name": "vscode-npc-gen-runner",
  "displayName": "NPC Gen Runner",
  "description": "Fetch generator from contest pages and run user solutions with generated seeds.",
  "version": "0.2.7",
  "publisher": "kyoplayer",
  "engines": {
    "vscode": "^1.60.0"
  },
  "main": "./out/extension.js",
  "scripts": {
    "compile": "tsc -p ."
  },
  "devDependencies": {
    "@types/cheerio": "^0.22.35",
    "@types/he": "^1.2.3",
    "@types/node": "^18.19.123",
    "@types/node-fetch": "^2.6.3",
    "typescript": "^4.9.0",
    "vscode": "^1.1.37"
  },
  "dependencies": {
    "cheerio": "^1.0.0-rc.12",
    "he": "^1.2.0",
    "node-fetch": "^2.6.7"
  },
  "contributes": {
    "commands": [
      {
        "command": "npc.fetchGenerator",
        "title": "NPC: Fetch Generator"
      },
      {
        "command": "npc.runWithGenerators",
        "title": "NPC: Run with Generator(s)"
      },
      {
        "command": "npc.runHeuristic",
        "title": "NPC: Run with Heuristic (gen→main→scorer)"
      },
      {
        "command": "npc.runJudge",
        "title": "NPC: Run Judge (seeds.txt, TL & retries)"
      },
      {
        "command": "npc.generateEnvHelper",
        "title": "NPC: Get Recommended Settings (helper)"
      }
    ],
    "configuration": {
      "type": "object",
      "title": "NPC Gen Runner",
      "properties": {
        "npc.pythonPath": {
          "type": "string",
          "default": "py",
          "description": "Path to Python interpreter."
        },
        "npc.genFilename": {
          "type": "string",
          "default": "gen.py",
          "description": "Generator filename."
        },
        "npc.mainFilename": {
          "type": "string",
          "default": "main.py",
          "description": "Main solution filename."
        },
        "npc.timeoutMs": {
          "type": "number",
          "default": 30000,
          "description": "Timeout in milliseconds for running solutions."
        },
        "npc.maxOutputBytes": {
          "type": "number",
          "default": 10000000,
          "description": "Maximum output size in bytes."
        },
        "npc.outputDir": {
          "type": "string",
          "default": ".",
          "description": "Directory to write inputs/outputs/summary relative to workspace root."
        },
        "npc.threads": {
          "type": "number",
          "default": 0,
          "description": "Number of worker threads to use for running seeds. 0 = use physical CPU cores."
        },
        "npc.genCommand": {
          "type": "string",
          "default": "py {wrapper}",
          "description": "Shell command to run the generator wrapper. Use {wrapper} to refer to the generated wrapper file path."
        },
        "npc.mainRunCommand": {
          "type": "string",
          "default": "py {main}",
          "description": "Shell command to run the main program for each seed. {main} is replaced with main filename (workspace relative). {exe} is replaced with npc.mainExec when you use a prebuilt executable."
        },
        "npc.mainExec": {
          "type": "string",
          "default": "main_exec",
          "description": "Executable filename generated by build (used with {exe} in mainRunCommand)."
        },
        "npc.mainBuildCommand": {
          "type": "string",
          "default": "g++ main.cpp -o {out}",
          "description": "Optional shell command to build the main program once before running seeds (use {out} placeholder; leave empty to skip build)."
        },
        "npc.mainBuildEnabled": {
          "type": "boolean",
          "default": false,
          "description": "Whether to execute the main build command. If false, the build step will never run (even if mainBuildCommand is set)."
        },
        "npc.scorerFilename": {
          "type": "string",
          "default": "scorer.py",
          "description": "Scorer (evaluation) filename which takes program stdout as input and prints a score / status."
        },
        "npc.scorerRunCommand": {
          "type": "string",
          "default": "py {scorer}",
          "description": "Shell command to run the scorer. Use {scorer} to refer to scorer filename, {exe} for prebuilt executable name."
        },
        "npc.scorerExec": {
          "type": "string",
          "default": "scorer_exec",
          "description": "Executable filename generated for the scorer (if you build it)."
        },
        "npc.scorerBuildCommand": {
          "type": "string",
          "default": "g++ scorer.cpp -o {out}",
          "description": "Optional shell command to build the scorer once before running seeds (use {out} placeholder; leave empty to skip build)."
        },
        "npc.scorerBuildEnabled": {
          "type": "boolean",
          "default": false,
          "description": "Whether to execute the scorer build command. If false, the scorer build step will never run (even if scorerBuildCommand is set)."
        },
        "npc.sharedVars": {
          "type": "string",
          "default": "",
          "description": "Comma-separated list of variable names from gen.py to pass to scorer via NPC_SHARED_FILE (JSON). Example: \"N,K,limit\""
        },
        "npc.judgeTimeLimitMs": {
          "type": "number",
          "default": 3000,
          "description": "Judge CPU-time limit in milliseconds for main (used to determine TLE). If CPU time isn't available, real time is used."
        },
        "npc.judgeRetries": {
          "type": "number",
          "default": 3,
          "description": "Number of attempts to retry a seed when TLE occurs (inclusive of first attempt)."
        },
        "npc.judgeRealTimeoutFactor": {
          "type": "number",
          "default": 2,
          "description": "Factor multiplied by judgeTimeLimitMs to produce a real-time timeout passed to runSingleSeed to allow process to finish (for environments where CPU time measurement isn't available)."
        }
      }
    }
  },
  "activationEvents": [
    "onCommand:npc.fetchGenerator",
    "onCommand:npc.runWithGenerators",
    "onCommand:npc.runHeuristic",
    "onCommand:npc.runJudge",
    "onCommand:npc.generateEnvHelper"
  ]
}
